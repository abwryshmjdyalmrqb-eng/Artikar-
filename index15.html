<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø¯Ø¹ÙˆØ© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ | Artiker</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
  :root{
    --bg1:#BFBFBF; --bg2:#BFBFBF;       /* Ø®Ù„ÙÙŠØ© */
    --card:#ffffff;                      /* Ø§Ù„ÙƒØ±ÙˆØª */
    --text:#222; --muted:#666; --white:#fff;
    --grad1:#9d50bb; --grad2:#a777e3;   /* Ø£Ù„ÙˆØ§Ù†Ùƒ */
    --accent:#9d50bb; --accent2:#a777e3;
    --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: system-ui, Tahoma, Arial;
    background: radial-gradient(1200px 600px at 50% -200px,var(--bg2),var(--bg1));
    color:var(--white);
  }
  .wrap{max-width:920px;margin:0 auto;padding:20px 14px 28px}
  .hero{
    background: linear-gradient(135deg,var(--grad1),var(--grad2));
    border-radius: var(--radius);
    padding:22px 18px;margin-top:6px; box-shadow:0 10px 30px rgba(0,0,0,.25)
  }
  .hero h1{margin:0 0 8px;font-size:26px}
  .hero p{margin:0;color:#f3eaff}
  .card{
    margin-top:14px;background:var(--card);color:var(--text);
    border-radius: var(--radius); padding:18px; box-shadow:0 8px 24px rgba(0,0,0,.18)
  }
  .row{display:grid;gap:12px}
  .row.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
  .row.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
  @media(max-width:640px){.row.cols-3{grid-template-columns:repeat(2,1fr)}}
  .btn{
    display:inline-flex;align-items:center;justify-content:center;
    gap:8px; padding:12px 14px; border:none; cursor:pointer; font-weight:600;
    border-radius:14px; transition:.2s; text-decoration:none
  }
  .btn-grad{color:#fff;background:linear-gradient(135deg,var(--accent),var(--accent2))}
  .btn-grad:hover{filter:brightness(1.08)}
  .btn-soft{background:#f3f1ff;color:#4a3b7a}
  .btn-soft:hover{background:#ebe7ff}
  .social{
    display:flex;flex-wrap:wrap;gap:10px
  }
  .social .chip{
    background:#f7f7ff;border:1px solid #ececff;color:#333;
    padding:10px 12px;border-radius:14px;display:flex;align-items:center;gap:8px;cursor:pointer
  }
  .chip:hover{background:#f1f1ff}
  .hint{font-size:13px;color:var(--muted);margin-top:6px}
  .footer-note{margin-top:14px;color:#ddd;font-size:13px}
  .ok{color:#11a36a}
  .err{color:#c0392b}
</style>
</head>

 <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#6e48aa">

<body>
  <div class="wrap">

    <div class="hero">
      <h1>Ø§Ø¯Ø¹Ù Ø£ØµØ¯Ù‚Ø§Ø¡Ùƒ ğŸ‰</h1>
      <p>Ø§Ù†Ø´Ø± Ø±Ø§Ø¨Ø·Ù†Ø§ Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ù…Ù†ØµØ§Øª Ø¨Ù†Ù‚Ø±Ø© ÙˆØ§Ø­Ø¯Ø© â€” Ù…ÙƒØ§ÙØ£Ø© ØªØ±Ø­ÙŠØ¨ÙŠØ© 0.50$ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ù‚Ù†Ø§ØªÙ†Ø§ Ø§Ù„Ø±Ø³Ù…ÙŠØ©.</p>
    </div>

    <!-- Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹ÙˆØ© -->
    <div class="card">
      <h3 style="margin:0 0 10px">Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹ÙˆØ© Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø­Ù…Ù„Ø©</h3>
      <div class="row cols-2">
        <input id="inviteLink" value="https://abwryshmjdyalmrqb-eng.github.io/Artikar-/" readonly
               style="width:100%;padding:12px 10px;border-radius:12px;border:1px solid #e9e6ff;outline:none;font-size:14px;background:#fbfbff">
        <button class="btn btn-grad" id="copyBtn"><span class="material-icons">content_copy</span>Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
      </div>
      <div class="hint" id="copyNote"></div>
    </div>

    <!-- Ù…Ø´Ø§Ø±ÙƒØ© -->
    <div class="card">
      <h3 style="margin-top:0">Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± Ø§Ù„Ø´Ø¨ÙƒØ§Øª</h3>
      <div class="social" id="socialList">
        <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªÙÙ†Ø´Ø£ Ù…Ù† Ø§Ù„Ø³ÙƒØ±Ø¨Øª -->
      </div>
      <div class="hint">Ù„Ùˆ Ø¬Ù‡Ø§Ø²Ùƒ ÙŠØ¯Ø¹Ù… <b>Web Share</b>ØŒ Ø¨Ù†ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø£ØµÙ„ÙŠØ©. ØºÙŠØ± ÙƒØ°Ø§ Ø¨Ù†Ø³ØªØ®Ø¯Ù… Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø£Ùˆ Ù†Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§. </div>
    </div>

    <!-- Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙˆØ§Ù„Ù…ÙƒØ§ÙØ£Ø© -->
    <div class="card">
      <h3 style="margin:0 0 10px">Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø±Ø³Ù…ÙŠØ©</h3>
      <div class="row cols-2">
        <a class="btn btn-grad" href="https://t.me/artikarTrading" target="_blank" rel="noopener">
          <span class="material-icons">send</span> Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ø§Ù„Ù‚Ù†Ø§Ø©
        </a>
        <button class="btn btn-soft" id="verifyBtn">
          <span class="material-icons">verified</span> ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙˆØ¥ÙŠØ¯Ø§Ø¹ 0.50$
        </button>
      </div>
      <div class="hint" id="verifyNote">Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ø§Ù„Ù‚Ù†Ø§Ø©" Ø§Ø±Ø¬Ø¹ ÙˆØ§Ø¶ØºØ· "ØªØ­Ù‚Ù‘Ù‚" Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…).</div>
      <div class="footer-note">Ø³ÙŠØªÙ… Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© ÙÙŠ Ø±ØµÙŠØ¯ Ø£Ø±Ø¨Ø§Ø­Ùƒ  ÙˆØ¹Ø±Ø¶Ù‡Ø§ ÙÙŠ ÙˆØ§Ø¬Ù‡ØªÙƒ).</div>
    </div>

  </div>

  <!-- Firebase (v10) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, get, set, runTransaction } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    // === Ø¥Ø¹Ø¯Ø§Ø¯ Firebase (Ø­Ø³Ø¨ Ù…Ø§ Ø¹Ø·ÙŠØªÙ†ÙŠ) ===
    const firebaseConfig = {
      apiKey: "AIzaSyBcgBaXfoQazccxSYF538PmpaL5fUH-RoA",
      authDomain: "trading-4b0aa.firebaseapp.com",
      databaseURL: "https://trading-4b0aa-default-rtdb.firebaseio.com",
      projectId: "trading-4b0aa",
      storageBucket: "trading-4b0aa.appspot.com", // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ø§ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ù…Ø¹ØªØ§Ø¯
      messagingSenderId: "738549332722",
      appId: "1:738549332722:web:6e407e8312dd0600842e6b",
      measurementId: "G-4MMPM6LMN4"
    };

    const app = initializeApp(firebaseConfig);
    const db  = getDatabase(app);

    // ===== Ø²Ø± Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· =====
    const inviteLinkEl = document.getElementById("inviteLink");
    const copyBtn = document.getElementById("copyBtn");
    const copyNote = document.getElementById("copyNote");

    copyBtn.addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(inviteLinkEl.value);
        copyNote.innerHTML = `<span class="ok">âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·.</span>`;
        setTimeout(()=> copyNote.textContent = "", 2000);
      } catch {
        copyNote.innerHTML = `<span class="err">âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ù†Ø³Ø®ØŒ Ø§Ù†Ø³Ø® ÙŠØ¯ÙˆÙŠÙ‹Ø§.</span>`;
      }
    });

    // ===== Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© =====
    const shareTargets = [
      { name:"ÙˆØ§ØªØ³Ø§Ø¨", icon:"chat",   url:(u,t)=>`https://wa.me/?text=${encodeURIComponent(t+" "+u)}` },
      { name:"ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…", icon:"send", url:(u,t)=>`https://t.me/share/url?url=${encodeURIComponent(u)}&text=${encodeURIComponent(t)}` },
      { name:"ÙÙŠØ³Ø¨ÙˆÙƒ", icon:"thumb_up", url:(u)=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(u)}` },
      { name:"X (ØªÙˆÙŠØªØ±)", icon:"share", url:(u,t)=>`https://twitter.com/intent/tweet?url=${encodeURIComponent(u)}&text=${encodeURIComponent(t)}` },
      { name:"ØªÙŠÙƒ ØªÙˆÙƒ", icon:"movie", url:()=>null },     // Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø§Ø¨Ø· Ø±Ø³Ù…ÙŠ â€” Ø³Ù†Ù†Ø³Ø®
      { name:"Ø¥Ù†Ø³ØªØ¬Ø±Ø§Ù…", icon:"photo_camera", url:()=>null }, // Ù„Ø§ Ù…Ø´Ø§Ø±ÙƒØ© ÙˆÙŠØ¨ â€” Ø³Ù†Ù†Ø³Ø®
      { name:"Ù„Ø§ÙŠÙƒÙŠ", icon:"favorite", url:()=>null },
      { name:"Ø¥ÙŠÙ…Ùˆ", icon:"call", url:()=>null }
    ];
    const msg = "Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Artikar Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø§ÙˆÙ„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙˆÙ‚Ù… Ø¨ØªØ¯Ø§ÙˆÙ„ ÙˆØ­Ù‚Ù‚ Ø§Ø±Ø¨Ø§Ø­ Ø®ÙŠØ§Ù„ÙŠØ©";
    const socialList = document.getElementById("socialList");

    // Web Share Ø£ÙˆÙ„Ù‹Ø§
    if (navigator.share) {
      const shareAll = document.createElement("button");
      shareAll.className = "btn btn-grad";
      shareAll.style.marginBottom = "10px";
      shareAll.innerHTML = `<span class="material-icons">ios_share</span> Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù…`;
      shareAll.onclick = ()=> navigator.share({ title:"Artiker", text:msg, url: inviteLinkEl.value }).catch(()=>{});
      socialList.appendChild(shareAll);
    }

    shareTargets.forEach(t=>{
      const chip = document.createElement("div");
      chip.className = "chip";
      chip.innerHTML = `<span class="material-icons">${t.icon}</span>${t.name}`;
      chip.onclick = async () => {
        const u = inviteLinkEl.value;
        const target = t.url(u,msg);
        if (target) {
          window.open(target, "_blank");
        } else {
          // Ù…Ù†ØµØ§Øª Ø¨Ù„Ø§ Ù…Ø´Ø§Ø±ÙƒØ© ÙˆÙŠØ¨ â€” Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
          try { await navigator.clipboard.writeText(`${msg}\n${u}`); } catch {}
          alert(`ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· â€” Ø§Ù„ØµÙ‚Ù‡ Ø¯Ø§Ø®Ù„ ${t.name}.`);
        }
      };
      socialList.appendChild(chip);
    });

    // ===== Ø§Ù„ØªØ­Ù‚Ù‚ Ùˆ Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© 0.50$ (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©) =====
    const verifyBtn  = document.getElementById("verifyBtn");
    const verifyNote = document.getElementById("verifyNote");

    function getUserIdFromLocalStorage(){
      try{
        const raw = localStorage.getItem("loggedInUser");
        if (!raw) return null;
        const obj = JSON.parse(raw);
        return obj.userId || null;
      }catch{ return null; }
    }

    async function depositBonusOnce(userId){
      const userRef = ref(db, `users/${userId}`);
      const flagRef = ref(db, `users/${userId}/bonusInviteClaimed`);

      // Ø§ÙØ­Øµ Ø§Ù„Ø¹Ù„Ù… Ø£ÙˆÙ„Ù‹Ø§
      const snap = await get(flagRef);
      if (snap.exists() && snap.val() === true) {
        return { ok:false, msg:"Ø³Ø¨Ù‚ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨." };
      }

      // Ù…Ø¹Ø§Ù…Ù„Ø© Ù„Ø²ÙŠØ§Ø¯Ø© totalProfit Ø¨Ù…Ù‚Ø¯Ø§Ø± 0.5 Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©
      const totalRef = ref(db, `users/${userId}/totalProfit`);
      await runTransaction(totalRef, (current) => {
        const cur = typeof current === "number" ? current : 0;
        return +(cur + 0.5).toFixed(2);
      });
      // Ø¹Ù„Ù‘Ù… Ø£Ù†Ù‡ ØªÙ… Ø§Ù„ØµØ±Ù
      await set(flagRef, true);

      // Ø­Ø¯Ù‘Ø« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯Ø©
      const pa = document.querySelector(".profit-amount");
      if (pa) {
        const n = parseFloat(pa.textContent) || 0;
        pa.textContent = (n + 0.5).toFixed(1);
      }
      return { ok:true };
    }

    verifyBtn.addEventListener("click", async ()=>{
      verifyBtn.disabled = true;
      verifyNote.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ¥ÙŠØ¯Ø§Ø¹ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©...";
      const userId = getUserIdFromLocalStorage();

      if (!userId){
        verifyNote.innerHTML = '<span class="err">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨ Ù…Ø³ØªØ®Ø¯Ù…. Ø§Ø¯Ø®Ù„ Ø¨Ø­Ø³Ø§Ø¨Ùƒ Ø£ÙˆÙ„Ù‹Ø§.</span>';
        verifyBtn.disabled = false;
        return;
      }

      try{
        const res = await depositBonusOnce(userId);
        if (res.ok){
          verifyNote.innerHTML = '<span class="ok">âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© 0.50$ Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯Ùƒ.</span>';
        } else {
          verifyNote.innerHTML = `<span class="err">âš ï¸ ${res.msg}</span>`;
        }
      }catch(e){
        console.error(e);
        verifyNote.innerHTML = '<span class="err">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§.</span>';
      }finally{
        verifyBtn.disabled = false;
      }
    });

    // Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ù…Ø§Ù†/Ø¯Ù‚Ù‘Ø©:
    // Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ­Ù‚Ù‚ ÙØ¹Ù„ÙŠÙ‹Ø§ Ù…Ù† Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ù‚Ù†Ø§Ø© ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ ÙÙ‚Ø·.
    // Ù„ØªØ­Ù‚ÙŠÙ‚ Ø¯Ù‚Ù‘Ø© 100% Ø§Ø³ØªØ®Ø¯Ù… Ø¨ÙˆØªÙƒ: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ØºØ· "ØªØ­Ù‚Ù‚" -> Ù†ÙØªØ­ deep-link Ù„Ù„Ø¨ÙˆØª -> Ø§Ù„Ø¨ÙˆØª ÙŠØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø¨Ù‚Ù†Ø§ØªÙƒ (getChatMember) Ø«Ù… ÙŠÙƒØªØ¨ ÙÙŠ DB Ø£Ù† Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© Ù…Ø³ØªØ­Ù‚Ø©. Ù‡Ø°Ø§ ÙŠØ­ØªØ§Ø¬ Ø³ÙŠØ±ÙØ±/ÙƒÙ„ÙˆØ¯ ÙÙ†ÙƒØ´Ù†.
  </script>
</body>
</html>